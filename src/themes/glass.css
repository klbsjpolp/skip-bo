.theme-glass {
  /* Dark, premium liquid glass palette */
  --bg-color: #2d6698;
  --text-color: #e5e7eb;          /* light gray text */
  --card-text-color: #5e5e5e;
  --title-color: #f3f4f6;         /* headings a touch brighter */

  /* Let glass panels own their background via utility */
  --zone-bg-color: transparent;   /* prevent flat bg behind glass */

  /* Cards keep dark tone and soft edges */
  --card-bg: #353b43;             /* on-glass card surface */
  --card-border: #5b6470;
  --card-shadow: 0 10px 30px rgba(0,0,0,0.35);
  --card-radius: calc(var(--card-height) / 8);

  /* Accents consistent with dark glass */
  --card-back: #1f3a8a;           /* deep indigo */
  --selected-border: #cbd5e1;

  /* Extra glass tuning (used by liquid-glass tokens) */
  --lg-blur: 20px;

  /* controls for cracked glass overlay on card backs */
  --crack-width: 1px;                           /* thinner crack lines for subtlety */
  --crack-color: rgba(255, 255, 255, 0.45);     /* even dimmer crack core */
  --crack-glow: rgba(160, 208, 255, 0.22);      /* further reduced glow */
  --crack-core: rgba(255, 255, 255, 0.25);      /* softer impact core */

  --skipbo-bg: black;

  .skipbo-text {
    @apply liquid-glass;
    --lg-radius: var(--card-radius);
  }

  .card.skipbo-text .card-inner::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: 0;
    /* layout */
    --m-gap: calc(var(--card-width) / 18);
    --m-w: calc((100% - var(--m-gap)) / 2);
    --m-h: calc((100% - (var(--m-gap) * 2)) / 3);

    /* panel colors */
    --p1: rgba(118, 186, 255, 0.28);  /* light azure */
    --p2: rgba(255, 149, 128, 0.28);  /* coral */
    --p3: rgba(120, 255, 196, 0.28);  /* mint */
    --p4: rgba(255, 219, 127, 0.28);  /* amber */
    --p5: rgba(171, 148, 255, 0.28);  /* lavender */
    --p6: rgba(255, 127, 202, 0.28);  /* pink */

    background-image:
      linear-gradient(var(--p1), var(--p1)),
      linear-gradient(var(--p2), var(--p2)),
      linear-gradient(var(--p3), var(--p3)),
      linear-gradient(var(--p4), var(--p4)),
      linear-gradient(var(--p5), var(--p5)),
      linear-gradient(var(--p6), var(--p6));
    background-size:
      var(--m-w) var(--m-h),
      var(--m-w) var(--m-h),
      var(--m-w) var(--m-h),
      var(--m-w) var(--m-h),
      var(--m-w) var(--m-h),
      var(--m-w) var(--m-h);
    background-position:
      left 0 top 0,
      right 0 top 0,
      left 0 top calc(var(--m-h) + var(--m-gap)),
      right 0 top calc(var(--m-h) + var(--m-gap)),
      left 0 top calc((var(--m-h) + var(--m-gap)) * 2),
      right 0 top calc((var(--m-h) + var(--m-gap)) * 2);
    background-repeat: no-repeat;

    /* glass feel */
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.22);
    backdrop-filter: blur(3px) saturate(1.2);
    -webkit-backdrop-filter: blur(3px) saturate(1.2);
    border-radius: inherit;
    pointer-events: none;
  }

  /* keep text above mosaic */
  .card.skipbo-text > span,
  .card.skipbo-text .card-corner-number {
     z-index: 1;
  }

  /* Apply animated liquid glass panels to player areas */
  .player-area {
    @apply liquid-glass;
  }

  .center-area {
    @apply liquid-glass liquid-glass-square;
  }

  .empty-card:not(:last-child) {
    visibility: hidden;
  }

  .card {
    color: var(--card-text-color);
    background: rgba(255, 255, 255, 0.15); /* A semi-transparent white background */
    backdrop-filter: blur(10px); /* The frosted glass effect */

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 50%; /* The height of the reflection */
      background: linear-gradient(
          to bottom,
          rgba(255, 255, 255, 0.25) 0%, /* Start with a strong highlight */
          rgba(255, 255, 255, 0) 100% /* Fade to transparent */
      );
    }
  }

  /* big cracked glass overlay on the blue card back */
  .card .back::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    /* Layer order:
       1) Impact core highlight
       2) Crack rays (thin bright lines at various angles through center)
       3) Subtle radial vignette to fade crack ends
    */
    background:
        /* 2) Primary fracture (thicker main crack from bottom-right toward center) */
        conic-gradient(
            at 82% 82%,
            transparent 0deg 223.5deg,
            rgba(255,255,255,0.62) 223.5deg 224.5deg,
            transparent 224.5deg 360deg
        ),

          /* 3) Crack rays (emanating from bottom-right using conic gradients) */
        /* Principal vertical rays (90° and 270°) */
        conic-gradient(
            at 82% 82%,
            transparent 0deg 89.65deg,
            var(--crack-color) 89.65deg 90.35deg,
            transparent 90.35deg 269.65deg,
            var(--crack-color) 269.65deg 270.35deg,
            transparent 270.35deg 360deg
        ),
        /* Remaining principal and secondary branches from same origin */
        conic-gradient(
            at 82% 82%,
            /* 25° */
            transparent 0deg 24.65deg,
            var(--crack-color) 24.65deg 25.35deg,
            /* 60° */
            transparent 25.35deg 59.65deg,
            var(--crack-color) 59.65deg 60.35deg,
            /* 65° (opposite of -115°) */
            transparent 60.35deg 64.65deg,
            var(--crack-color) 64.65deg 65.35deg,
            /* 110° */
            transparent 65.35deg 109.65deg,
            var(--crack-color) 109.65deg 110.35deg,
            /* 120° (opposite of -60°) */
            transparent 110.35deg 119.65deg,
            var(--crack-color) 119.65deg 120.35deg,
            /* 155° (opposite of -25°) */
            transparent 120.35deg 154.65deg,
            var(--crack-color) 154.65deg 155.35deg,
            /* 205° (opposite of 25°) */
            transparent 155.35deg 204.65deg,
            var(--crack-color) 204.65deg 205.35deg,
            /* 240° (opposite of 60°) */
            transparent 205.35deg 239.65deg,
            var(--crack-color) 239.65deg 240.35deg,
            /* 245° (opposite of 65°) */
            transparent 240.35deg 244.65deg,
            var(--crack-color) 244.65deg 245.35deg,
            /* 300° (opposite of 120°, equals -60°) */
            transparent 245.35deg 299.65deg,
            var(--crack-color) 299.65deg 300.35deg,
            /* 335° (opposite of 155°, equals -25°) */
            transparent 300.35deg 334.65deg,
            var(--crack-color) 334.65deg 335.35deg,
            transparent 335.35deg 360deg
        ),

        /* 4) Spider-web rings (subtle concentric fracture halos) */
        repeating-radial-gradient(
            circle at 82% 82%,
          rgba(255,255,255,0.08) 0,
          rgba(255,255,255,0.08) 1px,
          rgba(255,255,255,0.0) 1px,
          rgba(255,255,255,0.0) 8px
        ),
        repeating-radial-gradient(
            circle at 82% 82%,
            rgba(160,208,255,0.06) 0,
            rgba(160,208,255,0.06) 1px,
            transparent 1px,
            transparent 14px
        ),

          /* 5) Vignette so lines taper toward edges (simulate energy dissipation) */
        radial-gradient(circle at 82% 82%, rgba(0,0,0,0) 25%, rgba(0,0,0,0.18) 62%, rgba(0,0,0,0.3) 100%);
    mix-blend-mode: screen; /* bright-on-dark for a crack glare look */
    filter:
        drop-shadow(0 0 2px var(--crack-glow))
        drop-shadow(0 0 6px rgba(160,208,255,0.10));

  }

  body {
    background-image: linear-gradient(135deg, var(--bg-color) 0%, var(--bg-color) 50%, var(--title-color) 100%);
  }

  #root {
    /* SVG génératif en data URI ; courantColor = couleur des lignes */
    background-size: 520px 520px;
    background: transparent url("data:image/svg+xml;utf8,\
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200' preserveAspectRatio='none'>\
        <defs>\
          <filter id='cracks' color-interpolation-filters='sRGB'>\
            <feTurbulence type='fractalNoise' baseFrequency='0.015' numOctaves='2' seed='7' result='noise'/>\
            <feGaussianBlur in='noise' stdDeviation='0.7' result='blur'/>\
            <feConvolveMatrix in='blur' order='3' kernelMatrix='-1 -1 -1  -1 8 -1  -1 -1 -1' divisor='1' result='edges'/>\
            <feComponentTransfer in='edges' result='edges2'><feFuncA type='gamma' amplitude='1' exponent='2.2' offset='0'/></feComponentTransfer>\
            <feColorMatrix in='edges2' type='matrix' values='0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 3.5 -0.9' result='alpha'/>\
            <feMorphology in='alpha' operator='dilate' radius='0.6' result='thick'/>\
          </filter>\
        </defs>\
        <rect width='100%' height='100%' fill='none'/>\
        <g filter='url(%23cracks)'>\
          <rect width='100%' height='100%' fill='#fff'/>\
        </g>\
      </svg>") repeat;
  }
}
