@import 'tailwindcss';

@plugin 'tailwindcss-animate';

@custom-variant dark (&:is(.dark *));

@theme {
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  --card-width: 46px;
  --card-height: 66px;
  --stack-diff: 16px;
}

@media(width >= 64rem) {
  :root {
    --card-width: 70px;
    --card-height: 100px;
    --stack-diff: 20px;
  }
}

@utility container {
  margin-inline: auto;
  padding-inline: 2rem;
  @media (min-width: 640px) {
    max-width: none;
  }
  @media (min-width: 1400px) {
    max-width: 1400px;
  }
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }

  /* Discard pile stack positioning */
  .discard-pile-stack {
    position: relative;
    width: var(--card-width);
  }

  .discard-pile-stack .card,
  .discard-pile-stack .placeholder {
    position: absolute;
    left: 0;
    top: 0;
    box-shadow: var(--card-shadow);
  }

  /* Consistent hover effects for all selectable cards */
  .hoverable-card:hover {
    --card-translate-y: -2px;
    --card-scale: 1.05;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    transition: all 0.2s ease-in-out;
  }

  /* Drop target indicator should only show on hover */
  .drop-target-hover:hover::before {
    content: '';
    position: absolute;
    top: -3px;
    left: 0;
    right: 0;
    height: 3px;
    background-color: var(--selected-border);
    border-radius: 2px;
    opacity: 0.8;
    z-index: 10;
  }

  /* Card Animation Styles */
  .card-animation-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 1000;
  }

  .animated-card {
    @apply shadow-2xl fixed pointer-events-none will-change-transform;
  }

  /* Animation type specific styles */
  .animation-play {
    /* Cards moving to build piles */
    filter: brightness(1.1);
  }

  .animation-discard {
    /* Cards moving to discard piles */
    filter: saturate(0.8);
  }

  .animation-draw {
    /* Cards moving from deck to hand */
    filter: brightness(1.05);
  }

  /* Enhanced drop indicators */
  .drop-indicator {
    position: relative;
    transition: all 0.2s ease-in-out;
  }

  .drop-indicator.can-drop:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 15px rgba(245, 158, 11, 0.4);
  }

  .drop-indicator.can-drop:hover::after {
    content: '↓';
    position: absolute;
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 18px;
    color: var(--selected-border);
    font-weight: bold;
    z-index: 20;
    animation: dropPulse 1s infinite;
  }

  .drop-indicator.can-drop:hover::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    border: 2px dashed var(--selected-border);
    border-radius: calc(var(--card-radius) + 2px);
    opacity: 0.8;
    z-index: 15;
    animation: borderPulse 1.5s infinite;
  }

  @keyframes dropPulse {
    0%,
    100% {
      opacity: 0.6;
      transform: translateX(-50%) translateY(0);
    }
    50% {
      opacity: 1;
      transform: translateX(-50%) translateY(-3px);
    }
  }

  @keyframes borderPulse {
    0%,
    100% {
      opacity: 0.4;
    }
    50% {
      opacity: 0.8;
    }
  }

  @keyframes neonShift {
    0%   { background-position: 0 50%; }
    50%  { background-position: 100% 50%; }
    100% { background-position: 0 50%; }
  }

  @keyframes neonDrift {
    0%   { background-position: 0 50%; }
    100% { background-position: 200% 50%; }
  }

  .card.back * {
    @apply text-4xl;
  }

  .hand,
  .discard-piles,
  .build-piles {
    display: flex;
    flex-wrap: nowrap;
    gap: calc(var(--card-width) / 7);
    justify-content: center;
  }


  .discard-piles {
    flex-wrap: nowrap;
  }

  .hand-area {
    width: calc(var(--card-width) * (4 + 3 * 1/7)); /* 4 cards + gaps */
    height: var(--card-height); /* 1 card */

    &:not(.overlap-hand) {
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    &.overlap-hand {
      position: relative;
      /* Remove flexbox properties that conflict with absolute positioning */
      .card {
        position: absolute;
        top: 0;
        /* Left positioning is handled by inline styles from Card component */
        transition: all 0.2s ease-in-out;

        &.selected {
          z-index: 101 !important;
          --card-translate-y: -8px;

          &.hoverable-card:hover {
            z-index: 999;
            --card-translate-y: -10px;
          }
        }

        &.hoverable-card:hover {
          z-index: 999;
          --card-translate-y: -8px;
          --card-scale: 1.08;
        }
      }
    }

    &:not(.overlap-hand) {
      display: flex;
      gap: 10px;
      justify-content: center;
    }
  }

  .player-area,
  .center-area {
    @apply lg:p-5 p-3 rounded-lg lg:mb-5 mb-3 bg-(--zone-bg-color);
    border: 2px solid transparent;
    transition: border-color 0.3s;
  }

  .player-area.active-turn,
  .center-area.active-turn {
    @apply border-(--active-turn-color);
  }

  .discard-pile-stack {
    width: var(--card-width);
  }

  @media (max-width: 640px) {
    .player-area .discard-piles {
      width: 100%;
      margin-top: 20px;
    }
  }

  :root {
    --background: hsl(0 0% 100%);
    --foreground: hsl(0 0% 3.9%);

    --card: hsl(0 0% 100%);
    --card-foreground: hsl(0 0% 3.9%);

    --muted: hsl(0 0% 96.1%);
    --muted-foreground: hsl(0 0% 45.1%);
    --accent: hsl(0 0% 96.1%);
    --accent-foreground: hsl(0 0% 9%);
    --popover: hsl(0 0% 100%);
    --popover-foreground: hsl(0 0% 3.9%);
    --destructive: hsl(0 84.2% 60.2%);
    --destructive-foreground: hsl(0 0% 98%);
    --border: hsl(0 0% 89.8%);
    --input: hsl(0 0% 89.8%);
    --ring: hsl(0 0% 3.9%);
    --selected-border: #f59e0b;
    --selected-shadow: 0 0 20px var(--selected-border);

    --radius: 0.5rem;
    --stripes-bg: none;
  }

  .theme-light {
    --primary: hsl(0 0% 9%);
    --primary-foreground: hsl(0 0% 98%);
    --secondary: hsl(0 0% 96.1%);
    --secondary-foreground: hsl(0 0% 9%);

    --bg-color: #e5e7eb;
    --zone-bg-color: #f9fafb;
    --text-color: #374151;
    --title-color: #374151;
    --card-bg: white;
    --card-back: #3b82f6;
    --card-border: #9ca3af;
    --card-shadow: 0 1px 3px rgba(0,0,0,0.2);
    --card-radius: 8px;
    --active-turn-color: #22c55e;
    --button-bg: #4f46e5;
    --button-hover-bg: #4338ca;

    /* Card color ranges */
    --skipbo-text: white;
    --skipbo-bg: var(--active-turn-color);
    --card-g1: hsl(152 69% 58%);   /* 1‑4 */
    --card-g2: hsl(0 80% 60%);     /* 5‑8 */
    --card-g3: hsl(283 55% 57%);   /* 9‑12 */

    .card.back {
      background-image: linear-gradient(45deg,
        var(--active-turn-color) 0%,
        var(--active-turn-color) 50%,
        var(--card-back) 50%,
        var(--card-back) 100%
      );
    }
  }

  .theme-dark {
    /* Tailwind CSS variables for dark theme */
    --background: hsl(0 0% 3.9%);
    --foreground: hsl(0 0% 98%);
    --card: hsl(0 0% 3.9%);
    --card-foreground: hsl(0 0% 98%);
    --popover: hsl(0 0% 3.9%);
    --popover-foreground: hsl(0 0% 98%);
    --primary: hsl(0 0% 98%);
    --primary-foreground: hsl(0 0% 9%);
    --secondary: hsl(0 0% 14.9%);
    --secondary-foreground: hsl(0 0% 98%);
    --muted: hsl(0 0% 14.9%);
    --muted-foreground: hsl(0 0% 63.9%);
    --accent: hsl(0 0% 14.9%);
    --accent-foreground: hsl(0 0% 98%);
    --destructive: hsl(0 62.8% 30.6%);
    --destructive-foreground: hsl(0 0% 98%);
    --border: hsl(0 0% 14.9%);
    --input: hsl(0 0% 14.9%);
    --ring: hsl(0 0% 83.1%);

    /* Skip-Bo game theme variables - Dark theme */
    --bg-color: #111827;
    --zone-bg-color: #1f2937;
    --text-color: #d1d5db;
    --title-color: #f9fafb;
    --card-bg: #374151;
    --card-border: #6b7280;
    --card-back: #1d4ed8;
    --selected-border: #ead3b5;
    --card-radius: 8px;
    --active-turn-color: #4ade80;
    --button-bg: #6366f1;
    --button-hover-bg: #4f46e5;

    /* Card color ranges - same as light theme */
    --skipbo-text: black;
    --skipbo-bg: var(--card-back);
    --card-g1: hsl(152 69% 58%);
    --card-g2: hsl(0 80% 60%);
    --card-g3: hsl(283 55% 57%);

    .card.back {
      background-image: linear-gradient(45deg,
        var(--card-back) 0%,
        var(--card-back) 50%,
        var(--active-turn-color) 50%,
        var(--active-turn-color) 100%
      );
    }
  }

  .theme-pastel {
    --primary: hsl(170 70% 70%);
    --primary-foreground: hsl(0 0% 20%);
    --secondary: hsl(350 80% 85%);
    --secondary-foreground: hsl(0 0% 20%);

    --bg-color: #f0f4f8;
    --zone-bg-color: #ffffff;
    --text-color: #5a6270;
    --title-color: #4a5568;
    --card-bg: #ffffff;
    --card-border: #d8e2ef;
    --card-shadow: 0 2px 8px rgba(0,0,0,0.05);
    --card-radius: 10px;
    --card-back: #a0d2eb;
    --selected-border: #ffcb77;
    --active-turn-color: #a5dda5;
    --button-bg: #a0d2eb;
    --button-hover-bg: #8bbbd6;

    --skipbo-text: #ffedd8;
    --skipbo-bg: hsl(350 80% 85%);
    --card-g1: #a5dda5;
    --card-g2: #f7a9a8;
    --card-g3: #d0a5db;

    .card {
      border-width: 1px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);

      &.back {
        background: linear-gradient(135deg, #a0d2eb 0%, #bee5eb 100%);
      }
    }
  }

  .theme-metro {
    --primary: hsl(160 100% 32%);
    --primary-foreground: hsl(0 0% 100%);
    --secondary: hsl(0 100% 45%);
    --secondary-foreground: hsl(0 0% 100%);

    --bg-color: #1d1d1d;
    --zone-bg-color: #2d2d2d;
    --text-color: #ffffff;
    --title-color: #ffffff;
    --card-bg: #3c3c3c;
    --card-back: #ffd426;
    --card-border: #5e5e5e;
    --card-shadow: none;
    --card-radius: 2px;
    --selected-border: #1ba1e2;
    --active-turn-color: #60a917;
    --button-bg: #60a917;
    --button-hover-bg: #4c8712;

    --skipbo-text: hsl(0 0% 85%);
    --skipbo-bg: #1d1d1d;
    --card-g1: #00befc;
    --card-g2: #ff3b30;
    --card-g3: #ffd426;

    .card {
      &.back {
        &::before {
          content: "";
          position: absolute;
          inset: 0;
          background-image: repeating-conic-gradient(from 0deg,
            #00a3a3 0deg 90deg,
            #ff3b30 90deg 180deg,
            #00befc 180deg 270deg,
            #1ba1e2 270deg 360deg
          );
          background-size: var(--card-width) var(--card-width);
          background-repeat: no-repeat;
        }
      }

      &.skipbo-text {
        .card-corner-number {
          @apply text-(--skipbo-bg);
        }
        &::before {
          content: "";
          position: absolute;
          left: 0;
          top: 0;
          height: 20%;
          width: 100%;
          background-color: #ffd426;
        }
        &::after {
          content: "";
          position: absolute;
          left: 0;
          bottom: 0;
          height: 20%;
          width: 100%;
          background-image: linear-gradient(to left,
          #00a3a3 0%,
          #00a3a3 25%,
          #ff3b30 25%,
          #ff3b30 50%,
          #00befc 50%,
          #00befc 75%,
          #1ba1e2 75%,
          #1ba1e2 100%
          );
        }
      }
    }
  }

  .theme-rainbow {
    --primary: hsl(0 100% 70%);
    --primary-foreground: hsl(0 0% 100%);
    --secondary: #9381ff;
    --secondary-foreground: hsl(0 0% 100%);

    --bg-color: #f0f8ff;
    --zone-bg-color: #ffffff;
    --text-color: #333333;
    --title-color: #ff6b6b;
    --card-bg: #ffffff;
    --card-border: #9381ff;
    --card-shadow: 0 0 8px rgba(0, 0, 0, 0.15);
    --card-radius: 12px;
    --card-back: #6a5acd;
    --selected-border: #ffd700;
    --active-turn-color: #4caf50;
    --button-bg: #ff6b6b;
    --button-hover-bg: #ff5252;

    --skipbo-text: hsl(0, 0%, 100%);
    --card-g1: #4caf50;
    --card-g2: #ff6b6b;
    --card-g3: #9381ff;

    .discard-pile-stack {
      .hoverable-card:hover {
        box-shadow: 0 0 15px rgba(147, 129, 255, 0.4);
      }
      .card.selected.hoverable-card:hover {
        box-shadow: 0 0 20px var(--selected-border);
      }
    }

    .card {
      &.back {
        background-image: linear-gradient(
          to bottom,
          #ff6b6b 0%, /* Red */ #ffb347 16.6%, /* Orange */ #ffff66 33.2%, /* Yellow */ #4caf50 49.8%, /* Green */ #5d9cec 66.4%, /* Blue */ #9381ff 83%, /* Indigo */ #d183e8 100% /* Violet */
        );
      }

      &.skipbo-text {
        @apply text-shadow-black overflow-hidden;
        /* Réglages rapides */
        --center-y: 60%;     /* centre vertical du cercle (plus grand => arc plus bombé) */
        --inner: 30%;         /* rayon intérieur de l’arc visible */
        --band: 3%;         /* épaisseur d’une bande (ajustez entre 2% et 3%) */

        &::before {
          content: "";
          position: absolute;
          inset: -10% -20% -60% -20%; /* déborde pour bien couvrir */
          pointer-events: none;

          /* Anneaux concentriques: chaque couleur est une couronne radiale */
          background-image:
                  linear-gradient(#ffffff40, #ffffff40),
                  radial-gradient(circle at 50% var(--center-y),
                  var(--card-bg) 0 var(--inner),

                  #8f00ff var(--inner) calc(var(--inner) + var(--band)),
                  #4b0082 calc(var(--inner) + var(--band)) calc(var(--inner) + var(--band) * 2),
                  #0077ff calc(var(--inner) + var(--band) * 2) calc(var(--inner) + var(--band) * 3),
                  #00ff00 calc(var(--inner) + var(--band) * 3) calc(var(--inner) + var(--band) * 4),
                  #ffff00 calc(var(--inner) + var(--band) * 4) calc(var(--inner) + var(--band) * 5),
                  #ff7f00 calc(var(--inner) + var(--band) * 5) calc(var(--inner) + var(--band) * 6),
                  #ff0000 calc(var(--inner) + var(--band) * 6) calc(var(--inner) + var(--band) * 7),

                  var(--card-bg) calc(var(--inner) + var(--band) * 7) 100%
                  );
          background-blend-mode: normal;
        }

        & > * {
          position: relative;
          z-index: 1;
        }
      }
    }

    .discard-pile-stack {
      .card.selected {
        box-shadow: 0 0 20px var(--selected-border);
      }

      .hoverable-card:hover {
        box-shadow: 0 0 15px rgba(147, 129, 255, 0.4);
      }

      .card.selected.hoverable-card:hover {
        box-shadow: 0 0 20px var(--selected-border);
      }
    }
  }

  .theme-neon {
    --primary: hsl(157 100% 50%);
    --primary-foreground: hsl(0 0% 0%);
    --secondary: hsl(324 100% 50%);
    --secondary-foreground: hsl(0 0% 100%);

    --bg-color: #0a0a0a;
    --zone-bg-color: #1a1a1a;
    --text-color: #00ff88;
    --title-color: #ff0099;
    --card-bg: #1a1a1a;
    --card-border: #00ff88;
    --card-shadow: 0 0 10px rgba(0,255,136,0.3);
    --card-radius: 12px;
    --card-back: #0066ff;
    --selected-border: #ffff00;
    --active-turn-color: #00ff88;
    --button-bg: #ff0099;
    --button-hover-bg: #cc0077;

    --skipbo-text: hsl(60 100% 60%);
    --skipbo-bg: var(--secondary);
    --card-g1: #00ff88;
    --card-g2: #ff0099;
    --card-g3: #0066ff;

    .card {
      &.back {
        background: linear-gradient(135deg, #ff0099 0%, #00ff88 25%, #0066ff 50%, #ff0099 75%, #00ff88 100%);
        overflow: hidden; /* keep glow inside rounded corners */

        /* Animated neon glow overlay */
        &::before {
          content: "";
          position: absolute;
          inset: -8%;
          border-radius: calc(var(--card-radius) + 10px);
          background: linear-gradient(
                  120deg,
                  #ff0099 0%,
                  #00ff88 40%,
                  #0066ff 70%,
                  #ff0099 100%
          );
          background-size: 250% 250%;
          filter: blur(10px) saturate(1.1);
          opacity: 0.30;          /* subtle; tune to 0.25–0.45 */
          z-index: 0;
          animation: neonDrift 9s linear infinite alternate;
        }

        /* Optional: very subtle scanlines for texture */
        &::after {
          content: "";
          position: absolute;
          inset: 0;
          border-radius: var(--card-radius);
          pointer-events: none;
          z-index: 0;
          background: repeating-linear-gradient(
                  to bottom,
                  rgba(255,255,255,0.03) 0px,
                  rgba(255,255,255,0.03) 1px,
                  transparent 2px,
                  transparent 4px
          );
          mix-blend-mode: overlay;
          opacity: 0.4; /* softer than front */
        }

        /* Ensure any inner content (logos, etc.) stays above overlays */
        > * {
          position: relative;
          z-index: 1;
        }
      }

      &.skipbo-text {
        color: var(--skipbo-text);
        /* Keep skipbo-text utility bg as base; add neon overlay via ::before */
        background: none;

        /* Big neon text glow */
        text-shadow:
                0 0 4px currentColor,
                0 0 8px currentColor,
                0 0 16px currentColor;

        /* Outer and inner neon glow */
        box-shadow:
                0 0 12px var(--secondary),             /* magenta outer */
                inset 0 0 14px rgba(0, 255, 136, .25); /* green inner */

        /* Decorative animated neon gradient layer */
        &::before {
          content: "";
          position: absolute;
          inset: -6%;
          border-radius: calc(var(--card-radius) + 8px);
          background: linear-gradient(
                  120deg,
                  #ff0099 0%,
                  #00ff88 40%,
                  #0066ff 70%,
                  #ff0099 100%
          );
          filter: blur(8px) saturate(1.2);
          opacity: 0.55;
          z-index: 0;
          animation: neonShift 6s linear infinite;
          background-size: 200% 200%;
        }

        /* Subtle scanlines for a retro-futuristic vibe */
        &::after {
          content: "";
          position: absolute;
          inset: 0;
          z-index: 0;
          background:
                  repeating-linear-gradient(
                          to bottom,
                          rgba(255,255,255,0.05) 0px,
                          rgba(255,255,255,0.05) 1px,
                          transparent 2px,
                          transparent 4px
                  );
          mix-blend-mode: overlay;
          border-radius: var(--card-radius);
          pointer-events: none;
        }

        /* Ensure content sits above the decorative layers */
        > * {
          position: relative;
          z-index: 1;
        }
      }
    }
  }

  .theme-retro {
    --primary: hsl(174 59% 39%);
    --primary-foreground: hsl(0 0% 100%);
    --secondary: hsl(11 83% 62%);
    --secondary-foreground: hsl(0 0% 100%);

    --bg-color: #f4f1de;
    --zone-bg-color: #e9c46a;
    --text-color: #264653;
    --card-bg: #f4a261;
    --card-border: #e76f51;
    --card-shadow: 3px 3px 0 var(--card-border);
    --card-radius: 15px;
    --card-back: var(--zone-bg-color);
    --selected-border: var(--card-border);
    --selected-shadow: 3px 3px 0 var(--primary);
    --active-turn-color: #264653;
    --button-bg: #2a9d8f;
    --button-hover-bg: #21867a;

    --skipbo-text: hsl(40 80% 80%);
    --skipbo-bg: var(--card-bg);
    --card-g1: #2a9d8f;
    --card-g2: #e76f51;
    --card-g3: #264653;

    .card {
      &.back {
        --transparent-size: calc(var(--card-height) / 50);
        --stripe-size: calc(var(--card-height) / 10);
        background-image: repeating-linear-gradient(
                45deg,
                var(--card-g1)  0,
                var(--card-g1)  calc(var(--stripe-size) * 1),
                transparent     calc(var(--stripe-size) * 1),
                transparent     calc(var(--stripe-size) * 1 + var(--transparent-size) * 1),
                var(--card-g2)  calc(var(--stripe-size) * 1 + var(--transparent-size) * 1),
                var(--card-g2)  calc(var(--stripe-size) * 2 + var(--transparent-size) * 1),
                transparent     calc(var(--stripe-size) * 2 + var(--transparent-size) * 1),
                transparent     calc(var(--stripe-size) * 2 + var(--transparent-size) * 2),
                var(--card-g3)  calc(var(--stripe-size) * 2 + var(--transparent-size) * 2),
                var(--card-g3)  calc(var(--stripe-size) * 3 + var(--transparent-size) * 2),
                transparent     calc(var(--stripe-size) * 3 + var(--transparent-size) * 2),
                transparent     calc(var(--stripe-size) * 3 + var(--transparent-size) * 3),
                var(--card-bg)  calc(var(--stripe-size) * 3 + var(--transparent-size) * 3),
                var(--card-bg)  calc(var(--stripe-size) * 4 + var(--transparent-size) * 3),
                transparent     calc(var(--stripe-size) * 4 + var(--transparent-size) * 3),
                transparent     calc(var(--stripe-size) * 4 + var(--transparent-size) * 4)
        );
      }
      &.skipbo-text {
        @apply overflow-hidden
          before:absolute before:top-0   before:left-0 before:w-full before:h-1/6
          after:absolute  after:bottom-0 after:left-0  after:w-full  after:h-1/6;
        &::before {
          background-image: conic-gradient(from 45deg,
            transparent 0deg 180deg,
            var(--card-g2) 180deg 360deg
          );
        }
        &::after {
          background-image: conic-gradient(from 225deg,
            transparent 0deg 180deg,
            var(--card-g1) 180deg 360deg
          );
        }
        span:not(.card-corner-number) {
          @apply relative
            before:absolute before:z-[-1] before:content-['Skip-Bo']
            after:absolute  after:z-[-1]  after:content-['Skip-Bo']
            before:text-(--card-g1)  before:bottom-1 before:right-1.5
            after:text-(--card-g2)   after:top-1     after:left-1.5;
        }
      }
    }
  }

  body {
    font-family: 'Inter', sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
  }

  h1 {
    @apply text-center font-bold text-lg lg:text-xl text-(--title-color);
  }

  h3 {
    @apply font-bold text-sm lg:text-lg text-(--title-color);
  }

  * {
    @apply border-border;
  }
}

@utility card-height {
  height: var(--card-height);
}

@utility card {
  @apply text-center leading-none flex items-center justify-center font-bold cursor-pointer card-height
  lg:not-[.skipbo-text]:text-2xl not-[.skipbo-text]:text-xl;
  width: var(--card-width);
  border: 1px solid var(--card-border);
  border-radius: var(--card-radius);
  user-select: none;
  background-color: var(--card-bg);
  transition: all 0.2s ease-in-out;
  color: var(--text-color);
  box-shadow: var(--card-shadow);
  transform-origin: bottom center;
  --card-rotate: 0deg;
  --card-translate-y: 0px;
  --card-scale: 1;
  transform: translateY(var(--card-translate-y)) scale(var(--card-scale)) rotate(var(--card-rotate));

  &.back {
    background-color: var(--card-back);
  }

  &.selected {
    border-color: var(--selected-border);
    --card-translate-y: -5px;
    box-shadow: var(--selected-shadow);
    z-index: 100;
  }
}

@utility card-range-1 {
  color: var(--card-g1);
}

@utility card-range-2 {
  color: var(--card-g2);
}

@utility card-range-3 {
  color: var(--card-g3);
}

@utility skipbo-text {
  @apply text-(--skipbo-text) bg-(--skipbo-bg) text-base lg:text-2xl;
}

@utility card-back {
  background-color: var(--card-back);
}

@utility placeholder {
  width: var(--card-width);
  height: var(--card-height);
  border: 2px dashed var(--card-border);
  border-radius: var(--card-radius);
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 18px;
  color: var(--card-border);
  cursor: pointer;
}

@utility card-corner-number {
  @apply absolute top-0.5 lg:top-1 left-1 lg:left-1.5 text-xs font-bold invisible lg:visible;
}

.discard-pile-stack .card:not(:last-child) .card-corner-number {
  @apply visible;
}

@utility vertical-text {
  @apply transform rotate-180;
  writing-mode: vertical-rl;
}

@utility drop-indicator {
  position: relative;
  transition: all 0.2s ease-in-out;
}

@utility drop-target-hover {
  position: relative;
}
